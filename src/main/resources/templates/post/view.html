<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <th:block th:include="fragments.html :: basic-head"></th:block>
    <th:block th:include="fragments.html :: navbar-head"></th:block>
    <style>
        #myCarousel, .carousel-item>img {
            height: 400px;
        }
        .carousel-item>img {
            width: 100%;
        }
    </style>
</head>
<body>
<nav th:replace="fragments.html :: main-nav"></nav>
<section class="container">
    <div class="row justify-content-center">
        <div class="col-lg-2 col-3">
            <div class="list-group">
                <a href="#" class="list-group-item disabled">Disabled item</a>
                <a href="#" class="list-group-item disabled">Disabled item</a>
                <a href="#" class="list-group-item disabled">Disabled item</a>
            </div>
        </div>
        <div class="col-lg-8 col-9">
            <h3 class="text-center">
                <span class="text-danger" th:text='${"[" + post.category.title + "] "}'></span>
                <span th:text="${post.title}"></span>
            </h3>
            <hr/>
            <div class="d-flex justify-content-end">
                <div class="dropdown">
                    <span class="dropdown-toggle" data-toggle="dropdown">
                        <svg th:if="${#strings.isEmpty(post.account.profileImage)}" th:data-jdenticon-value="${#authentication.name}"
                             width="25" height="25" class="rounded border bg-light"></svg>
                        <img th:if="${!#strings.isEmpty(post.account.profileImage)}" th:src="${account.profileImage}"
                             width="25" height="25" class="rounded border"/>
                        <strong th:text="${post.account.nickname}"></strong>
                    </span>
                    <div class="dropdown-menu mt-2">
                        <a class="dropdown-item" th:href="@{'/account/profile/' + ${post.account.nickname}}">ÌîÑÎ°úÌïÑ Î≥¥Í∏∞</a>
                        <a class="dropdown-item" href="#">Ï™ΩÏßÄ Î≥¥ÎÇ¥Í∏∞</a>
                    </div>
                </div>
            </div>
            <div class="mt-3 row justify-content-center">
                <div th:if="${#sets.isEmpty(post.images)}">
                    <img src="/images/no-image-icon.PNG" >
                </div>
                <div th:if="${!#sets.isEmpty(post.images)}" id="myCarousel" class="col carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ul class="carousel-indicators">
                        <li th:each="num: ${#numbers.sequence(0,#sets.size(post.images)-1)}" data-target="#myCarousel" th:data-slide-to="${num}" th:class="${num == 0}? active"></li>
                    </ul>
                    <!-- The slideshow -->
                    <div class="carousel-inner">

<!--                        <img src="/displayFile?fileName=/nick/post-id/s_d9098510-1393-4eac-bd20-3ed03dcbe101_KakaoTalk_20200622_100949064.jpg"-->
<!--                             alt="4eac-bd20-3ed03dcbe101_KakaoTalk_20200622_100949064.jpg">-->

                        <div th:each="imgFileName, i: ${post.images}" class="carousel-item" th:classappend="${i.index == 0}? active">
                            <img th:src='${"/displayFile?post-id=" + post.getId() + "&fileName=" + imgFileName}' th:alt="${imgFileName}">
                        </div>
                    </div>
                    <!-- Left and right controls -->
                    <a class="carousel-control-prev" href="#myCarousel" data-slide="prev">
                        <i class="fa fa-arrow-left" aria-hidden="true"></i>
                    </a>
                    <a class="carousel-control-next" href="#myCarousel" data-slide="next">
                        <i class="fa fa-arrow-right" aria-hidden="true"></i>
                    </a>
                </div>
            </div>
            <hr/>
            <div class="d-flex justify-content-between">
                <div class="row">
                    üöâ ÏÑ†Ìò∏ÌïòÎäî ÏúÑÏπò :
                    <p class="mr-2" th:each="station: ${post.stations}" data-toggle="tooltip" data-placement="bottom" th:title='${station.region + "-" + station.line}'>
                        <u th:text="${station.name + 'Ïó≠'}"></u>
                    </p>
                </div>
                <div>
                    <i class="fa fa-calendar" aria-hidden="true"></i>
                    <small th:text="${#temporals.format(post.createdDateTime, 'yyyy-MM-dd')}"></small>
                    ‚àô <i class="fa fa-mouse-pointer" aria-hidden="true"></i>
                    <small th:text="${post.lookCount}"></small>
                    ‚àô <i class="fa fa-envelope-o" aria-hidden="true"></i>
                    <small th:text="${post.letterCount}"></small>
                </div>
            </div>
            <div class="d-flex justify-content-between">
                <div class="row">
                    &#128179; Ìù¨ÎßùÍ∞Ä : <strong th:text="${post.price + 'Ïõê'}">Ïõê</strong>
                </div>
            </div>
            <div th:utext="${post.body}"></div>
            <hr/>
            <div class="d-flex justify-content-end" th:if="${#authentication.principal != 'anonymousUser' && post.isCreatedBy(#authentication.principal)}">
                <a th:href="@{'/post/' + ${post.id} + '/edit'}" class="btn btn-primary p-2 mr-2">ÏàòÏ†ï</a>
                <a th:href="@{/}" class="btn btn-danger p-2">ÏÇ≠Ï†ú</a>
            </div>
        </div>
    </div>
</section>
<footer th:replace="fragments.html :: footer"></footer>
<th:block th:replace="fragments.html :: basic-script"></th:block>
<th:block th:replace="fragments.html :: tooltip-script"></th:block>
<script>
$(document).ready(function() {
    $("#myCarousel").carousel({interval: false, pause: "hover"});
});
</script>
</body>
</html>