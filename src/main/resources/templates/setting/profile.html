<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments.html :: head"></head>
<body id="page-top">
<nav th:replace="fragments.html :: main-nav"></nav>
<section>
    <div class="container">
        <div class="row justify-content-center">
            <div th:replace="fragments.html :: profile-header"></div>
            <nav th:replace="fragments.html :: setting-menu(currentMenu = 'profile')"></nav>
            <div class="col-md-8 mt-3 tab-content" id="nav-tabContent">
                프로필 변경 폼
            </div>
        </div>
    </div>
</section>
<div th:replace="fragments.html :: normal-footer"></div>
<div th:replace="fragments.html :: normal-script"></div>
<script type="application/javascript" th:inline="javascript" th:fragment="ajax-csrf-header">
    $(function() {
        var csrfToken = /*[[${_csrf.token}]]*/ null;
        var csrfHeader = /*[[${_csrf.headerName}]]*/ null;
        $(document).ajaxSend(function (e, xhr, options) {
            xhr.setRequestHeader(csrfHeader, csrfToken);
        });
    });
</script>
<script>
    $(".idCheck").click(function(){

        var query = {userId : $("#userId").val()};

        $.ajax({
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            url : "/idCheck",
            type : "post",
            data : query,
            success : function(data) {
                if(data == 1) {
                    $(".result .msg").text("사용 불가");
                    $(".result .msg").attr("style", "color:#f00");
                } else {
                    $(".result .msg").text("사용 가능");
                    $(".result .msg").attr("style", "color:#00f");
                }
            }
        });  // ajax 끝
    });
</script>
</body>
</html>
